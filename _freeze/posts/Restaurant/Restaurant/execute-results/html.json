{
  "hash": "68c8f32ebe442b66809f84281dfdd6e6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Restaurant \"\nauthor: \"Jake Starkey\"\ndate: \"2023-11-02\"\nimage: \"Unknown.jpeg\"\nexecute: \n  warning: false\n  message: false\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n\n##Question 1\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(skimr)\n```\n:::\n\n\n\nLoad the data.frame for Question 1.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrestaurant <- read.csv('https://bcdanl.github.io/data/DOHMH_NYC_Restaurant_Inspection.csv')\n```\n:::\n\n\n\n## Q1a\n\nWhat are the mean, standard deviation, first quartile, median, third quartile, and maximum of SCORE for each GRADE of restaurants?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrestaurant %>% \n  group_by(GRADE) %>% \n  skim(SCORE) %>% \n  select(-n_missing)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |17633      |\n|Number of columns        |12         |\n|_______________________  |           |\n|Column type frequency:   |           |\n|numeric                  |1          |\n|________________________ |           |\n|Group variables          |GRADE      |\n\n\n**Variable type: numeric**\n\n|skim_variable |GRADE | complete_rate|  mean|    sd| p0| p25| p50| p75| p100|hist  |\n|:-------------|:-----|-------------:|-----:|-----:|--:|---:|---:|---:|----:|:-----|\n|SCORE         |A     |             1|  9.26|  3.42|  0|   7|  10|  12|   13|‚ñÅ‚ñÇ‚ñÇ‚ñÖ‚ñá |\n|SCORE         |B     |             1| 21.03|  4.16|  0|  18|  21|  24|   36|‚ñÅ‚ñÅ‚ñá‚ñá‚ñÅ |\n|SCORE         |C     |             1| 38.56| 10.83|  0|  31|  36|  44|   86|‚ñÅ‚ñá‚ñá‚ñÇ‚ñÅ |\n\n\n:::\n:::\n\n\n\n## Q1b\n\nHow many restaurants with a GRADE of A are there in NYC?\nHow much percentage of restaurants in NYC are a GRADE of C?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfreq <- as.data.frame( table(restaurant$GRADE) )\n\nprop <- as.data.frame( 100 * prop.table(table(restaurant$GRADE)) )\n```\n:::\n\n\n\n## Q1c\n\nProvide both (1) ggplot code and (2) a simple comment to describe how the distribution of SCORE varies by GRADE and CRITICAL FLAG.\n\n- Boxplots\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(restaurant) +\n  geom_boxplot(aes(x = SCORE, y = GRADE, fill = GRADE) ) +\n  facet_grid( CRITICAL.FLAG ~ . )\n```\n\n::: {.cell-output-display}\n![](Restaurant_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n-Histograms\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(restaurant) +\n  geom_histogram(aes(x = SCORE), binwidth = 1 ) +\n  facet_grid( CRITICAL.FLAG ~ GRADE )\n```\n\n::: {.cell-output-display}\n![](Restaurant_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n-Mostly,\n  -The values of SCORE for GRADE A ranges from 0 to 13.\n  -The values of SCORE for GRADE B ranges 13 to 27.\n  -The values of SCORE for GRADE C ranges 24 to 75.\n-For Not Critical type, two SCORE values around 1 and 12 are most common, while 12 is the single most common SCORE value for Critical type.\n\n## Q1d\n\nProvide both (1) ggplot code and (2) a simple comment to describe how the proportion of CRITICAL FLAG varies by GRADE and BORO.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(restaurant) +\n  geom_bar(aes(x = CRITICAL.FLAG,\n               y = after_stat(prop), group = 1)) +\n  facet_grid( GRADE ~ BORO )\n```\n\n::: {.cell-output-display}\n![](Restaurant_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n-For GRADE A, the probability distribution of CRITICAL FLAG are similar across BOROs.\n\n-For GRADE B, the restaurants in Staten Island are more likely to be Critical than in other BOROs.\n\n-For GRADE C, the restaurants in Bronx are more likely to be Critical than in other BOROs.\n\n## Q1e\n\nFor the 10 most common CUISINE DESCRIPTION values, find the CUISINE DESCRIPTION value that has the highest proportion of GRADE A.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2e <- restaurant %>% \n  group_by(CUISINE.DESCRIPTION) %>% \n  mutate(n = n()) %>% \n  ungroup() %>% \n  filter(dense_rank(-n) <= 10) %>% \n  group_by(CUISINE.DESCRIPTION, GRADE) %>% \n  count() %>% \n  group_by(CUISINE.DESCRIPTION) %>% \n  mutate(prop_A = n / sum(n)) %>% \n  filter(GRADE == 'A') %>% \n  arrange(-prop_A)\n```\n:::\n\n\n\n## Q1f\n\n-Find the 3 most common names of restaurants (DBA) in each BORO.\n  -If the third most common DBA values are multiple, please include all the DBA values.\n-Overall, which DBA value is most common in NYC?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2f <- restaurant %>% \n  select(DBA, BORO) %>% \n  group_by(BORO, DBA) %>% \n  summarize(n = n()) %>% \n  mutate(ranking = dense_rank(-n)) %>% \n  filter(ranking <= 3) %>% \n  arrange(BORO, ranking)\n\nq2f_ <- restaurant %>% \n  group_by(DBA) %>% \n  count() %>% \n  arrange(-n)\n```\n:::\n\n\n\nNote that chipotle mexican grill and subway are both the third most popular franchise/chain in Manhattan. üåØ\n\nOverall, dunkin is the most popular franchise/chain in NYC. üç©\n\n## Q1g\n\nFor all the DBA values that appear in the result of Q1f, find the DBA value that is most likely to commit critical violation.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2g <- restaurant %>% \n  filter(DBA %in% q2f$DBA) %>% \n  group_by(DBA, CRITICAL.FLAG) %>% \n  count() %>% \n  group_by(DBA) %>% \n  mutate(lag_n = lag(n),\n         tot = sum(n),\n         prop_crit = lag_n / tot) %>% \n  select(DBA, prop_crit) %>% \n  filter(!is.na(prop_crit)) %>% \n  arrange(-prop_crit)\n```\n:::\n\n\n\n-Among popular franchises/chains, subway is most likely to commit Critical violation in NYC. ü•™\n",
    "supporting": [
      "Restaurant_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}